<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>注文フォーム - Simple Shop</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="header">
    <div class="container header__inner">
      <div class="brand">
        <div class="brand__logo">📦</div>
        <div class="brand__text">
          <div class="brand__name">注文フォーム</div>
          <div class="brand__tag">送信先は自由に変更できます</div>
        </div>
      </div>
      <nav class="nav">
        <a class="nav__link" href="index.html">← 戻る</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="section">
      <div class="summary">
        <h2 style="margin:0 0 8px;">ご注文内容</h2>
        <p class="note" style="margin-top:0;">
          下の注文内容が自動入力されます。送信先は「自分のフォーム」に差し替えて使ってください。
        </p>

        <form id="orderForm">
          <div style="display:grid; gap:10px; grid-template-columns: 1fr 1fr;">
            <input class="input" name="name" placeholder="お名前" required />
            <input class="input" name="email" placeholder="メールアドレス" type="email" required />
          </div>

          <input class="input" name="address" placeholder="住所（都道府県〜）" required style="width:100%; margin-top:10px;" />

          <textarea class="input" name="order" id="orderBox" rows="10" style="width:100%; margin-top:10px;" required></textarea>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
            <button class="button button--primary" type="submit">注文を送信（デモ）</button>
            <a class="button" href="index.html">商品に戻る</a>
          </div>

          <p class="note">
            ※いまはデモ送信（画面に表示）です。<br/>
            実運用は、Googleフォーム / Formspree / 自社API などに送る形に変更してください。
          </p>
        </form>

        <div id="result" style="margin-top:14px;"></div>
      </div>
    </section>
  </main>

  <script>
    function getQueryParam(name){
      const url = new URL(location.href);
      return url.searchParams.get(name) || "";
    }

    const order = decodeURIComponent(getQueryParam("order"));
    const box = document.getElementById("orderBox");
    box.value = order || "（カートが空です。index.html で商品を追加してください）";

    document.getElementById("orderForm").addEventListener("submit", (e) => {
      e.preventDefault();

      const fd = new FormData(e.target);
      const payload = Object.fromEntries(fd.entries());

      const safe = (s) => String(s).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");

      document.getElementById("result").innerHTML = `
        <div class="summary" style="background: rgba(52,211,153,.08); border-color: rgba(52,211,153,.18);">
          <h3 style="margin:0 0 6px;">デモ送信しました（実際には送っていません）</h3>
          <pre style="white-space:pre-wrap; margin:0; color: var(--text);">${safe(JSON.stringify(payload, null, 2))}</pre>
        </div>
      `;
    });
  </script>
</body>
</html>
